<!DOCTYPE html>

<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <link rel="shortcut icon" href="favicon.ico">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.11.2/css/all.css">
    <!-- Bootstrap core CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <!-- Material Design Bootstrap -->
    <link href="css/mdb.min.css" rel="stylesheet">
    <!-- Your custom styles (optional) -->
    <link href="css/style.min.css" rel="stylesheet">

    <title>TeamMusic - Music</title>
  </head>
  <body>
    <header>

      <!-- Navbar -->
      <nav class="navbar fixed-top navbar-expand-lg navbar-light white scrolling-navbar wow fadeInDown">
        <div class="container">

          <!-- Brand -->
          <img src="favicon.png" width="45px" height="45px" style="padding=none;"/>
          <h3 class="blue-text">TeamMusic</h3>


          <!-- Collapse -->
          <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>

          <!-- Links -->
          <!--
          <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <!-- Right
            <ul class="navbar-nav nav-flex-icons">
              <li class="nav-item">
                <a href="https://chat.whatsapp.com/C9hrSDsoQJLDh3o9wsZMk4" class="nav-link waves-effect" target="_blank">
                  <i class="fab fa-whatsapp"></i>
                </a>
              </li>
              <li class="nav-item">
                  <a href="https://drive.google.com/file/d/1HNnviq3lulBhWoo8Bdaa3jYRQpBkAp2U/view?usp=drivesdk" class="btn btn-outline-primary btn-rounded waves-effect"
                      target="_blank">
                      TeamMusic APK Download
                  </a>
              </li>
            </ul>


          </div>
          -->
        </div>
      </nav>
      <!-- Navbar -->

    </header>
    <br/>
    <br/>
    <!--Main Navigation-->
    <main class="mt-5 pt-4">
      <div class="container">

        <!--Section: Group of cards-->
        <section class="pt-5 mt-3 pb-3">

          <!--Grid row-->
          <div class="row">

            <!--Grid column-->
            <div class="col-md-12">

              <!--Card group-->
              <div class="card-group" id="grp">

                <!--Card-->
                <div class="card card-personal mb-4" style="width:22rem;">

                  <!--Card image-->
                  <div class="view">
                    <img class="card-img-top" src="https://mdbootstrap.com/img/Photos/Avatars/img%20(26).jpg" alt="Card image cap">
                    <a href="#!">
                      <div class="mask rgba-white-slight"></div>
                    </a>
                  </div>
                  <!--Card image-->
                  <ul align="right">
                    <li class="list-inline-item pt-auto">
                      <a class="btn btn-primary btn-action ml-auto mr-2 btn-sm waves-effect waves-light"><i class="fas fa-play pl-1"></i></a></li>
                    <li class="list-inline-item">
                      <a class="btn btn-primary btn-action ml-auto mr-4 btn-sm waves-effect waves-light"><i class="fas fa-download pl-1"></i></a></li>
                  </ul>

                  <!--Card content-->
                  <div class="card-body">
                    <!--Title-->
                    <a>
                      <h4 class="card-title">Music Name</h4>
                    </a>
                  </div>

                  <div class="rounded-bottom blue-gradient text-center pt-3 mt-auto">
                    <ul class="list-unstyled list-inline font-small">
                      <li class="list-inline-item pr-2 white-text"><i class="fas fa-eye pr-1"></i>127</li>
                      <li class="list-inline-item pr-2"><a href="#" class="white-text"><i
                            class="fas fa-comments pr-1"></i>3</a></li>

                      <li class="list-inline-item"><a href="#" class="white-text"><i class="fas fa-heart pr-1"> </i>3</a></li>
                      <li class="list-inline-item pr-2"><a href="#" class="white-text"><i class="fas fa-user pr-1">
                      </i>TeamWorks DEV</a></li>
                    </ul>
                  </div>
                  <!--Card content-->

                </div>
                <!--Card-->

              </div>
              <!--Card group-->

            </div>
            <!--Grid column-->

          </div>
          <!--Grid row-->

        </section>
<!--Section: Group of personal cards-->
      </div>
    </main>
    <script type="text/javascript" src="js/jquery-3.4.1.min.js"></script>
    <!-- Bootstrap tooltips -->
    <script type="text/javascript" src="js/popper.min.js"></script>
    <!-- Bootstrap core JavaScript -->
    <script type="text/javascript" src="js/bootstrap.min.js"></script>
    <!-- MDB core JavaScript -->
    <script type="text/javascript" src="js/mdb.min.js"></script>
    <!-- Initializations -->
    <script type="text/javascript">
      // Animations initialization
      new WOW().init();

    </script>
    <!-- TeamMusic Scrips -->
    <script type="text/javascript">
    	var download = document.getElementById("download");
    	var judul = document.getElementById("judul");
    	var update = document.getElementById("update");
    	var pesan = document.getElementById("pesan");

    	fetch('https://teammusic-tw.firebaseio.com/update/version/-Lj06YCr3nTQAidRfSmZ.json')
    	.then((response) => {
    	    return response.json();
    	})
    	.then((data) => {
    		download.innerHTML = '<a href="'+data.url+'">Download TeamMusic '+data.versionName+'</a>';
    		judul.innerHTML = data.title;
    		pesan.innerHTML = data.msg;
    		//update.innerHTML = data.tmp;
    	});
    </script>

    <script type="text/javascript">
    	var listmusik = document.querySelector('#listmusik');
    	var uli =  document.createElement('ul');
    	var btnload = document.querySelector('#btnLoadMore');
    	var listpopuler = document.querySelector('#populer');
    	var listpop = document.querySelector('#listpop');
      var group = document.querySelector("#grp");
    	var awal,akhir,total = 0;
    	var json = {};
    	var popmusik = {};

    	fetch('https://teammusic-tw.firebaseio.com/upload/text.json')
    	.then((response) => {
    	    return response.json();
    	})
    	.then((data) => {
    		json = Object.values(data);
    		popmusik = Object.values(data).sort(function(a,b){
    			return b.view - a.view;
    		});
    		tampil();
    		populerMusik(1);
    	});

    	function tampil(){
    		awal = 0;
    		akhir = 10;
    		var c = json.slice(awal,akhir);

    		for(i in c){
    			let img;
    			if(c[i].img === undefined){
    				img = 'https://img.icons8.com/bubbles/2x/music.png';
    			} else {
    				img = c[i].img;
    			}
          /*
    			var liname = document.createElement('li');
    			var ul2 =  document.createElement('ul');
    			var li2 = document.createElement('li');
    			//liname.className = 'hidden';

    			liname.textContent = 'Name: ' + c[i].name;
    			li2.innerHTML = '<img src="' + img + '" width="30%">';
    			li2.innerHTML += '<br><audio preload="none" controls><source src="' + c[i].url + '" type="audio/mpeg"> Your Browser does not support the audio tag.</audio>';
    			li2.innerHTML += '<br>' + '[ <a href="' + c[i].url + '">Download Disini</a> ]<hr>';
    			ul2.appendChild(li2);
    			liname.appendChild(ul2);
    			uli.appendChild(liname);
          */

          group.innerHTML += '
          <div class="card card-personal mb-4" style="width:22rem;">

            <!--Card image-->
            <div class="view">
              <img class="card-img-top" src="' + img + '" alt="Card image cap">
              <a href="#!">
                <div class="mask rgba-white-slight"></div>
              </a>
            </div>
            <!--Card image-->
            <ul align="right">
              <li class="list-inline-item pt-auto">
                <a class="btn btn-primary btn-action ml-auto mr-2 btn-sm waves-effect waves-light"><i class="fas fa-play pl-1"></i></a></li>
              <li class="list-inline-item">
                <a class="btn btn-primary btn-action ml-auto mr-4 btn-sm waves-effect waves-light"><i class="fas fa-download pl-1"></i></a></li>
            </ul>

            <!--Card content-->
            <div class="card-body">
              <!--Title-->
              <a>
                <h4 class="card-title">' + c[i].name + '</h4>
              </a>
            </div>

            <div class="rounded-bottom blue-gradient text-center pt-3 mt-auto">
              <ul class="list-unstyled list-inline font-small">
                <li class="list-inline-item pr-2 white-text"><i class="fas fa-eye pr-1"></i>' + c[i].view + '</li>
                <li class="list-inline-item pr-2"><a href="#" class="white-text"><i
                      class="fas fa-comments pr-1"></i>3</a></li>

                <li class="list-inline-item"><a href="#" class="white-text"><i class="fas fa-heart pr-1"> </i>3</a></li>
                <li class="list-inline-item pr-2"><a href="#" class="white-text"><i class="fas fa-user pr-1">
                </i>' + c[i].uid + '</a></li>
              </ul>
            </div>
            <!--Card content-->

          </div>'

    			total = total + 1;
    		}
    		listmusik.appendChild(uli);
    	}

    	function loadMore(){
    		awal = awal + 10;
    		akhir = akhir + 10;
    		var c = json.slice(awal,akhir);

    		for(i in c){
    			let img;
    			if(c[i].img === undefined){
    				img = 'https://img.icons8.com/bubbles/2x/music.png';
    			}else{
    				img = c[i].img;
    			}
    			var liname = document.createElement('li');
    			var ul2 =  document.createElement('ul');
    			var li2 = document.createElement('li');
    			//liname.className = 'hidden';
    			liname.textContent = 'Name: ' + c[i].name;
    			li2.innerHTML = '<img src="' + img + '" width="30%">';
    			li2.innerHTML += '<br><audio preload="none" controls><source src="' + c[i].url + '" type="audio/mpeg"> Your Browser does not support the audio tag.</audio>';
    			li2.innerHTML += '<br>' + '[ <a href="' + c[i].url + '">Download Disini</a> ]<hr>';
    			ul2.appendChild(li2);
    			liname.appendChild(ul2);
    			uli.appendChild(liname);
    			total = total + 1;
    		}
    		listmusik.appendChild(uli);

    		if(total === json.length){
    			btnload.classList.add("hidden");
    		}
    	}

    </script>
  </body>
</html>
